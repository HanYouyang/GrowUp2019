<html>
    <head>
        <meta charset="utf-8">
        <title>guario</title>
    </head>
    <body>
        <canvas id="id-canvas" width="640" height="640"></canvas>
        <script>
        // 每个方块 8 * 8像素
        // 每个像素 2 bits 
        // 16 bytes 一个图块
        const e = sel => document.querySelector(sel)
        const log = console.log.bind(console)
        // 二进制格式用buffer接
        const ajax = request => {
            let r = new XMLHttpRequest()
            r.open('GET', request.url, true)
            r.responseType = 'arraybuffer'
            r.onreadystatechange = event => {
                if (r.readyState == 4) {
                    request.callback(r.response)
                }
            }
            r.send()
        }
        
        const _main = () => {
            let request = {
                url: 'mario.nes',
                callback(r) {
                    let bytes = new Uint8Array(r)
                    log('bytes', bytes)
                },
            }
            ajax(request)
        }

        _main()
        </script>
    </body>

</html>